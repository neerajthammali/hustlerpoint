{
  "entities": {
    "Comment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Comment",
      "type": "object",
      "description": "Represents a user comment on an article.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Comment entity."
        },
        "articleId": {
          "type": "string",
          "description": "Reference to the Article this comment belongs to. (Relationship: Article 1:N Comment)"
        },
        "authorId": {
          "type": "string",
          "description": "Reference to the User who wrote the comment. (Relationship: User 1:N Comment)"
        },
        "content": {
          "type": "string",
          "description": "The text content of the comment."
        },
        "createdAt": {
          "type": "string",
          "description": "The date and time when the comment was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "The date and time when the comment was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "articleId",
        "authorId",
        "content",
        "createdAt"
      ]
    },
    "Article": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Article",
      "type": "object",
      "description": "Represents an article on the Hustler Point Hub platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Article entity."
        },
        "title": {
          "type": "string",
          "description": "The title of the article."
        },
        "contentLink": {
          "type": "string",
          "description": "Link to the article's content, stored in Google Sheets/Excel.",
          "format": "uri"
        },
        "authorId": {
          "type": "string",
          "description": "Reference to the User who authored the article. (Relationship: User 1:N Article)"
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to the Category the article belongs to. (Relationship: Category 1:N Article)"
        },
        "publishedAt": {
          "type": "string",
          "description": "The date and time when the article was published.",
          "format": "date-time"
        },
        "thumbnailUrl": {
          "type": "string",
          "description": "URL to the article's thumbnail image.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "title",
        "contentLink",
        "authorId",
        "categoryId",
        "publishedAt",
        "thumbnailUrl"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Hustler Point Hub platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "bio": {
          "type": "string",
          "description": "A short biography of the user."
        }
      },
      "required": [
        "id",
        "email",
        "displayName"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category for articles.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the category."
        },
        "description": {
          "type": "string",
          "description": "A description of the category."
        }
      },
      "required": [
        "id",
        "name"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "articles/{articleId}",
        "definition": {
          "entityName": "Article",
          "schema": {
            "$ref": "#/backend/entities/Article"
          },
          "description": "Stores article data. Root collection.",
          "params": [
            {
              "name": "articleId",
              "description": "Unique identifier for the article."
            }
          ]
        }
      },
      {
        "path": "articles/{articleId}/comments/{commentId}",
        "definition": {
          "entityName": "Comment",
          "schema": {
            "$ref": "#/backend/entities/Comment"
          },
          "description": "Stores comments related to a specific article. Subcollection of articles. Includes denormalized fields if needed for authorization (e.g., if comment visibility depends on the article's status).",
          "params": [
            {
              "name": "articleId",
              "description": "Unique identifier for the article."
            },
            {
              "name": "commentId",
              "description": "Unique identifier for the comment."
            }
          ]
        }
      },
      {
        "path": "users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user data. Root collection.",
          "params": [
            {
              "name": "userId",
              "description": "Unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores article categories. Root collection.",
          "params": [
            {
              "name": "categoryId",
              "description": "Unique identifier for the category."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store comments on articles. The primary collections are `articles` and `users`. Comments are stored in a subcollection under each article (`articles/{articleId}/comments/{commentId}`). This structure allows for efficient retrieval of comments for a specific article.  Authorization Independence is achieved through path-based ownership. The structure enables secure `list` operations by restricting access to comments based on the article they belong to and the authenticated user's permissions (which would need to be implemented in security rules, e.g. only allowing read access to comments on published articles)."
  }
}